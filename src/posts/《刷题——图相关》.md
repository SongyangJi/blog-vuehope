---
title: 《刷题——图相关》
date: 2023-01-23 06:32:22
categories: 算法题
tags:
---



### 图的最大路径和（树上DP求直径）

```java
import java.util.*;
public class Solution {
    /**
     * 树的直径
     * @param n int整型 树的节点个数
     * @param Tree_edge Interval类一维数组 树的边
     * @param Edge_value int整型一维数组 边的权值
     * @return int整型
     */
    int N = 100010;
    int M = 2 * N;
    
    int idx = 0;
    int[] head = new int[N];
    int[] w = new int[M], ver = new int[M], next = new int[M];
    
    void add(int x, int y, int z) {
        w[++idx] = z;
        ver[idx] = y;
        next[idx] = head[x];
        head[x] = idx;
    }
    
    int ans = 0;
    boolean[] v = new boolean[N];
    int[] d = new int[N];
    
    void dfs(int x) {
        v[x] = true;
        for(int i = head[x]; i > 0; i = next[i]) {
            int y = ver[i];
            if(v[y]) continue; // 不要重复计算和统计
            dfs(y);
            ans = Math.max(ans, d[x] + d[y] + w[i]);  // key: 先用后更新
            d[x] = Math.max(d[x], d[y] + w[i]);
        }
    }
    
    public int solve (int n, Interval[] edges, int[] values) {
        // write code here
        for(int i = 0; i < n - 1; i++) {
            int x = edges[i].start;
            int y = edges[i].end;
            int z = values[i];
            add(x, y, z);
            add(y, x, z);
        }
        dfs(0);
        return ans;
    }
}
```



一道类似的题：**二叉树中的最大路径和**

```java
import java.util.*;

public class Solution {
    
    int ans = -(int)1e8;
    public int maxPathSum (TreeNode root) {
        // write code here
        dfs(root);
        return ans;
    }
    
    int dfs(TreeNode root) { // return 从这个节点（此节点的值必选）出发的”链“的最大和
        if(root == null) return 0;
        int lv = dfs(root.left);
        int rv = dfs(root.right);
        ans = Math.max(ans, (lv > 0 ? lv : 0) + (rv > 0 ? rv : 0) + root.val); // 串上左右节点
        int cs = Math.max(lv, rv) > 0 ? Math.max(lv, rv) : 0; // 向左出发、向右出发
        return cs + root.val; // 本身的节点的值必选
    }
}
```

